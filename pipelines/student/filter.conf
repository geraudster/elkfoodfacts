filter {
    mutate { gsub => [ "message", "\"", "'" ] }
    csv {
        separator => "\t"
        autogenerate_column_names => false
        autodetect_column_names => true
        skip_header => true
        skip_empty_columns => true
    }
    mutate {
        split => {
            "packaging_tags" => ","
            "brands_tags" => ","
            "categories_tags" => ","
            "categories_fr" => ","
            "origins_tags" => ","
            "origins_fr" => ","
            "manufacturing_places_tags" => ","
            "labels_tags" => ","
            "labels_fr" => ","
            "emb_codes_tags" => ","
            "cities_tags" => ","
            "countries_tags" => ","
            "countries_fr" => ","
            "ingredients_tags" => ","
            "ingredients_analysis_tags" => ","
            "allergens_fr" => ","
            "traces_tags" => ","
            "traces_fr" => ","
            "additives_tags" => ","
            "additives_fr" => ","
            "food_groups_tags" => ","
            "food_groups_fr" => ","
            "states_tags" => ","
            "states_fr" => ","
            "nutrient_levels_tags" => ","
            "data_quality_errors_tags" => ","
            "popularity_tags" => ","
        }
    }

    mutate {
        convert => {
            "energy-kj_100g" => "float"
            "energy-kcal_100g" => "float"
            "energy_100g" => "float"
            "energy-from-fat_100g" => "float"
            "fat_100g" => "float"
            "saturated-fat_100g" => "float"
            "butyric-acid_100g" => "float"
            "caproic-acid_100g" => "float"
            "caprylic-acid_100g" => "float"
            "capric-acid_100g" => "float"
            "lauric-acid_100g" => "float"
            "myristic-acid_100g" => "float"
            "palmitic-acid_100g" => "float"
            "stearic-acid_100g" => "float"
            "arachidic-acid_100g" => "float"
            "behenic-acid_100g" => "float"
            "lignoceric-acid_100g" => "float"
            "cerotic-acid_100g" => "float"
            "montanic-acid_100g" => "float"
            "melissic-acid_100g" => "float"
            "monounsaturated-fat_100g" => "float"
            "polyunsaturated-fat_100g" => "float"
            "omega-3-fat_100g" => "float"
            "alpha-linolenic-acid_100g" => "float"
            "eicosapentaenoic-acid_100g" => "float"
            "docosahexaenoic-acid_100g" => "float"
            "omega-6-fat_100g" => "float"
            "linoleic-acid_100g" => "float"
            "arachidonic-acid_100g" => "float"
            "gamma-linolenic-acid_100g" => "float"
            "dihomo-gamma-linolenic-acid_100g" => "float"
            "omega-9-fat_100g" => "float"
            "oleic-acid_100g" => "float"
            "elaidic-acid_100g" => "float"
            "gondoic-acid_100g" => "float"
            "mead-acid_100g" => "float"
            "erucic-acid_100g" => "float"
            "nervonic-acid_100g" => "float"
            "trans-fat_100g" => "float"
            "cholesterol_100g" => "float"
            "carbohydrates_100g" => "float"
            "sugars_100g" => "float"
            "sucrose_100g" => "float"
            "glucose_100g" => "float"
            "fructose_100g" => "float"
            "lactose_100g" => "float"
            "maltose_100g" => "float"
            "maltodextrins_100g" => "float"
            "starch_100g" => "float"
            "polyols_100g" => "float"
            "fiber_100g" => "float"
            "soluble-fiber_100g" => "float"
            "insoluble-fiber_100g" => "float"
            "proteins_100g" => "float"
            "casein_100g" => "float"
            "serum-proteins_100g" => "float"
            "nucleotides_100g" => "float"
            "salt_100g" => "float"
            "sodium_100g" => "float"
            "alcohol_100g" => "float"
            "vitamin-a_100g" => "float"
            "beta-carotene_100g" => "float"
            "vitamin-d_100g" => "float"
            "vitamin-e_100g" => "float"
            "vitamin-k_100g" => "float"
            "vitamin-c_100g" => "float"
            "vitamin-b1_100g" => "float"
            "vitamin-b2_100g" => "float"
            "vitamin-pp_100g" => "float"
            "vitamin-b6_100g" => "float"
            "vitamin-b9_100g" => "float"
            "folates_100g" => "float"
            "vitamin-b12_100g" => "float"
            "biotin_100g" => "float"
            "pantothenic-acid_100g" => "float"
            "silica_100g" => "float"
            "bicarbonate_100g" => "float"
            "potassium_100g" => "float"
            "chloride_100g" => "float"
            "calcium_100g" => "float"
            "phosphorus_100g" => "float"
            "iron_100g" => "float"
            "magnesium_100g" => "float"
            "zinc_100g" => "float"
            "copper_100g" => "float"
            "manganese_100g" => "float"
            "fluoride_100g" => "float"
            "selenium_100g" => "float"
            "chromium_100g" => "float"
            "molybdenum_100g" => "float"
            "iodine_100g" => "float"
            "caffeine_100g" => "float"
            "taurine_100g" => "float"
            "ph_100g" => "float"
            "fruits-vegetables-nuts_100g" => "float"
            "fruits-vegetables-nuts-dried_100g" => "float"
            "fruits-vegetables-nuts-estimate_100g" => "float"
            "fruits-vegetables-nuts-estimate-from-ingredients_100g" => "float"
            "collagen-meat-protein-ratio_100g" => "float"
            "cocoa_100g" => "float"
            "chlorophyl_100g" => "float"
            "carbon-footprint_100g" => "float"
            "carbon-footprint-from-meat-or-fish_100g" => "float"
            "nutrition-score-fr_100g" => "float"
            "nutrition-score-uk_100g" => "float"
            "glycemic-index_100g" => "float"
            "water-hardness_100g" => "float"
            "choline_100g" => "float"
            "phylloquinone_100g" => "float"
            "beta-glucan_100g" => "float"
            "inositol_100g" => "float"
            "carnitine_100g" => "float"
        }
    }

    mutate {
        remove_field => "message"
    }
}
